(function(p){function k(c,n,e,b){var a,d;if(e)try{a=e(b.detail)}catch(l){d=l}else a=b.detail;if(a instanceof f)a.b(function(c){n.a(c)},function(c){n.e(c)});else if(e&&a)n.a(a);else if(d)n.e(d);else n[c](a)}function g(){}function f(){this.c("promise:resolved",function(c){this.d("success",{detail:c.detail})},this);this.c("promise:failed",function(c){this.d("error",{detail:c.detail})},this)}function q(c){var n=c.l;n||(n=c.l={});return n}function m(c,n){for(var a=0,e=c.length;a<e;a++)if(c[a][0]===n)return a;
return-1}function h(c,a){this.type=c;for(var e in a)a.hasOwnProperty(e)&&(this[e]=a[e])}function s(c,a){e.async(function(){c.d("promise:resolved",{detail:a});c.q=!0;c.w=a})}function b(c,a){e.async(function(){c.d("promise:failed",{detail:a});c.p=!0;c.u=a})}var a="undefined"!==typeof window?window:{},a=a.MutationObserver||a.WebKitMutationObserver,e;if("undefined"!==typeof process&&"[object process]"==={}.toString.call(process))a=function(c,a){process.D(function(){c.call(a)})};else if(a){var d=[],a=
new a(function(){var c=d.slice();d=[];c.forEach(function(c){c[0].call(c[1])})}),r=document.createElement("div");a.observe(r,{attributes:!0});a=function(c,a){d.push([c,a]);r.setAttribute("drainQueue","drainQueue")}}else a=function(c,a){setTimeout(function(){c.call(a)},1)};var l={r:function(c){c.c=this.c;c.h=this.h;c.d=this.d;return c},c:function(c,a,e){var b=q(this),d,l;c=c.split(/\s+/);for(e=e||this;l=c.shift();)(d=b[l])||(d=b[l]=[]),-1===m(d,a)&&d.push([a,e])},h:function(c,a){var e=q(this),b,d;for(c=
c.split(/\s+/);b=c.shift();)a?(b=e[b],d=m(b,a),-1!==d&&b.splice(d,1)):e[b]=[]},d:function(a,e){var b,d,l,f;if(b=q(this)[a])for(var r=0,g=b.length;r<g;r++)d=b[r],l=d[0],d=d[1],"object"!==typeof e&&(e={detail:e}),f=new h(a,e),l.call(d,f)}};f.prototype={b:function(a,b){var d=new f;this.q&&e.async(function(){k("resolve",d,a,{detail:this.w})},this);this.p&&e.async(function(){k("reject",d,b,{detail:this.u})},this);this.c("promise:resolved",function(e){k("resolve",d,a,e)});this.c("promise:failed",function(a){k("reject",
d,b,a)});return d},a:function(a){s(this,a);this.e=this.a=g},e:function(a){b(this,a);this.e=this.a=g}};l.r(f.prototype);e={async:a,f:f,B:h,C:l};p.j=e})(window);
var t=function(p){var k=p.j;k.all=function(f){function h(a){e.e(a)}function g(b){return function(l){a[b]=l;0===--d&&e.a(a)}}var b,a=[],e=new k.f,d=f.length;for(b=0;b<d;b++)f[b].b(g(b),h);return e};var g=0,f={},q;return function(m){function h(a,b,f){return function(){a.v.postMessage({id:b,body:f},"*")}}var s=[],b=this,a=new k.f;q||(p.addEventListener("message",function(a){a.data.id&&(console.log("received message"+a.data.id+"..."),f[a.data.id].a(a.data.body),delete f[a.data.id])},!1),q=!0);if(!m)return null;
p.frames[m]||(temp=document.createElement("iframe"),temp.setAttribute("name",m),temp.src=m,temp=document.getElementsByTagName("head")[0].appendChild(temp),temp.style.display="none",temp.addEventListener("load",function(){b.v=p.frames[m];g++;f[g]=new k.f;b.k=f[g];h(b,g,{cmd:"ls"})();f[g].b(function(e){b.m=e;a.a()})},!1));this.t=a;this.s=function(a){s.push(a)};this.list=function(){return this.k};this.send=function(){var a=this.g.apply(this,arguments);a.a();return a};this.g=function(){var b,d=[],r;for(b=
0;b<arguments.length;b++)g++,f[g]=new k.f,r=arguments[b],a.b(h(this,g,r)),d.push(f[g]);return k.all(d)}}}(window),u=function(){function p(b){return Array.prototype.slice.call(b,0)}function k(b){"BODY"===b.relatedNode.tagName&&(document.removeEventListener("DOMNodeInserted",k),u.o())}function g(b){var a=document.createElement("script");a.text=b;m.appendChild(a)}var f,q=[],m=document.head||document.getElementsByTagName("head")[0],h={i:!0};document.addEventListener("DOMNodeInserted",k);var s=0;return{n:function(b){var a;
h.i&&delete h.i;for(a in h)if(h[a].m[b])return console.log("loading "+b+" from "+a),h[a];console.log("loading "+b+" from "+a);return h[a]},A:function(b,a){h[b]=new t(a);h[b].id=b;return h[b].t},o:function(){var b=[],a=p(m.querySelectorAll("link[type='application/x-script-store']")),e=p(m.querySelectorAll("[data-tap-get]")),d=[];a.forEach(function(a){var b=a.getAttribute("data-id")||++s;d.push(u.A(b,a.getAttribute("href")))});e.forEach(function(a){b.push({url:a.getAttribute("data-tap-get")})});var g=
this;RSVP.all(d).b(function(){g.get(b).b(function(){f=!0;q.forEach(function(a){a()})})})},get:function(b,a){var e=1<arguments.length?a:arguments[0],d=h[1<arguments.length?b:"0"],f=[];if(1===arguments.length){for(d=0;d<e.length;d++)f.push(this.n(e[d].url).g(e[d]));return RSVP.all(f).b(function(a){a=a[0];for(var b=0;b<a.length;b++)g(a[b])})}return d.g(e).b(function(a){a=a[0];for(var b=0;b<a.length;b++)g(a[b])})},s:function(b){f?b():q.push(b)}}}();
